/* --- 1. 캔버스 및 가이드라인 --- */
#canvas {
    position: relative;
    /* JS가 offsetWidth/Height를 사용하므로 캔버스 크기가 명확해야 함 */
    width: 700px;  /* 예시 너비 */
    height: 500px; /* 예시 높이 */
    background-color: #f0f0f0;
    overflow: hidden;
    border: 1px solid #ccc;
    margin: 20px auto; /* 중앙 정렬 예시 */
}

.vertical-guide,
.horizontal-guide {
    position: absolute;
    background-color: #FF00FF; /* 눈에 띄는 색 */
    display: none; /* JS가 제어 */
    z-index: 10;
}

.vertical-guide {
    width: 1px;
    height: 100%;
    top: 0;
}

.horizontal-guide {
    height: 1px;
    width: 100%;
    left: 0;
}

/* --- 2. 장식 아이템 (.decoration-item) --- */
.decoration-item {
    position: absolute; /* JS가 left, top 제어 */
    cursor: move;
    border: 2px solid transparent;
    transition: border-color 0.1s;
    box-sizing: border-box; /* 테두리를 크기에 포함 */
}

.decoration-item img {
    width: 100%;
    height: 100%;
    display: block;
    user-select: none; /* 드래그 시 이미지 선택 방지 */
    pointer-events: none; /* 하위 img가 이벤트 가로채는 것 방지 */
    box-sizing: border-box;
}

/* --- 3. 선택된 아이템 (.selected) --- */
.decoration-item.selected {
    border: 2px dashed #4F99B2;
}

.decoration-item .handle,
.decoration-item .controls {
    display: none; /* 평소엔 숨김 */
    position: absolute;
    z-index: 20;
}

.decoration-item.selected .handle,
.decoration-item.selected .controls {
    display: block; /* 선택 시 보임 */
}

/* --- 4. 리사이즈/회전 핸들 (.handle) --- */
.handle {
    width: 12px;
    height: 12px;
    background-color: white;
    border: 1px solid #4F99B2;
    border-radius: 50%;
    box-sizing: border-box;
}

.handle.tl { top: -6px; left: -6px; cursor: nwse-resize; }
.handle.tr { top: -6px; right: -6px; cursor: nesw-resize; }
.handle.bl { bottom: -6px; left: -6px; cursor: nesw-resize; }
.handle.br { bottom: -6px; right: -6px; cursor: nwse-resize; }

.handle.rotator {
    top: -30px; /* 아이템 상단에서 30px 위 */
    left: 50%;
    transform: translateX(-50%);
    cursor: alias; /* 회전 커서 */
    width: 16px;
    height: 16px;
    background-color: #FFD700;
}

/* --- 5. 컨트롤 버튼 (반전, 삭제) --- */
.controls {
    bottom: -35px; /* 아이템 하단에서 35px 아래 */
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
}

.controls button {
    background: white;
    border: 1px solid #ccc;
    border-radius: 4px;
    cursor: pointer;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.controls button:hover {
    background-color: #f4f4f4;
}
.controls button img {
    width: 16px;
    height: 16px;
    pointer-events: none; /* 버튼 클릭 방해 방지 */
}

/* --- 6. 모바일 컨트롤러 UI --- */
#mobile-controller-ui {
    display: none; /* 평소엔 숨김 */
    flex-direction: column;
    width: 100%;
    max-width: 400px; /* 너무 넓어지는 것 방지 */
    margin: 0 auto;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
}

#controller-status {
    font-size: 16px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 15px;
}

#deco-selection {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    justify-content: center;
}

.ctrl-deco-btn {
    /* JS에서도 스타일을 지정하지만, 기본 스타일을 CSS에 정의 */
    padding: 10px 15px;
    border: 1px solid #ccc;
    background-color: #fff;
    color: black;
    border-radius: 8px;
    font-size: 14px;
}

/* JS가 인라인 스타일로 덮어쓸 활성 스타일 (참고용) */
/*
.ctrl-deco-btn.active { 
    background-color: #4F99B2;
    color: white;
    border-color: #4F99B2;
}
*/

#touchpad {
    flex-grow: 1; /* 남은 공간 모두 차지 */
    min-height: 150px;
    border: 2px dashed #ccc;
    border-radius: 10px;
    background-color: #f9f9f9;
    cursor: grab;
    user-select: none; /* 텍스트 선택 방지 */
}

#control-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 20px;
}

.ctrl-action-btn {
    padding: 15px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ddd;
    background-color: #f0f0f0;
    cursor: pointer;
}
.ctrl-action-btn:active {
    background-color: #e0e0e0;
}

/* --- 7. QR 코드 모달 --- */
#qr-modal {
    display: none; /* 평소엔 숨김 (JS가 flex로 변경) */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    align-items: center;
    justify-content: center;
    z-index: 1000;
}
#qrcode-container {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

/* --- 8. 타임라인 씬 썸네일 --- */
.scene {
    width: 100px;
    height: 71px; /* 700:500 비율 유지 */
    border: 1px solid #ccc;
    background-color: #fff;
    position: relative;
    overflow: hidden;
    cursor: pointer;
}
.scene.active {
    border: 2px solid #4F99B2;
}
