<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ë™í™” ë§Œë“¤ê¸° - ê¾¸ë¯¸ê¸° ëª¨ë“œ (ëª¨ë°”ì¼)</title>
    <!-- CSS íŒŒì¼ì„ ì—°ê²°í•©ë‹ˆë‹¤. -->
    <link rel="stylesheet" href="style3.css">
</head>
<body>

    <!-- ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ëŸ¬ UI (í‰ì†Œì—” ìˆ¨ê²¨ì ¸ ìˆìŒ) -->
    <div id="mobile-controller-ui" style="display: none; height: 100vh; width: 100vw; background: #f0f0f0; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; overflow-y: auto;">
        
        <h2 id="controller-status" style="color:#4F99B2; text-align: center; margin-bottom: 10px; flex-shrink: 0;">PC ì—°ê²° ëŒ€ê¸° ì¤‘...</h2>

        <div id="selection-area" style="width: 100%; max-width: 350px; text-align: center; margin-bottom: 15px; flex-shrink: 0;">
            <p style="margin: 5px 0 10px; font-weight: bold;">ì¡°ì‘í•  ì•„ì´í…œ ì„ íƒ:</p>
            <div id="deco-selection" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 8px;">
                <!-- JavaScriptê°€ ë™ì ìœ¼ë¡œ ë²„íŠ¼ì„ ì±„ì›ë‹ˆë‹¤. -->
            </div>
        </div>
        
        <div id="touchpad" style="width: 685px; height: 1218px; background: white; border: 2px solid #4F99B2; border-radius: 15px; position: relative; cursor: grab; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-bottom: 20px; flex-shrink: 0;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #aaa; font-size: 14px; text-align: center; padding: 10px;">ë“œë˜ê·¸í•˜ì—¬ ë¯¸ì„¸ ì¡°ì •</div>
        </div>

        <div id="control-buttons" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; width: 100%; max-width: 350px; flex-shrink: 0;">
            <button class="ctrl-action-btn" data-action="rotate-left" style="padding: 12px; background: #fff; border: 1px solid #ccc; border-radius: 8px; font-size: 16px;">âŸ² íšŒì „-</button>
            <button class="ctrl-action-btn" data-action="rotate-right" style="padding: 12px; background: #fff; border: 1px solid #ccc; border-radius: 8px; font-size: 16px;">íšŒì „+ âŸ³</button>
            <button class="ctrl-action-btn" data-action="scale-down" style="padding: 12px; background: #fff; border: 1px solid #ccc; border-radius: 8px; font-size: 16px;">ì¶•ì†Œ-</button>
            <button class="ctrl-action-btn" data-action="scale-up" style="padding: 12px; background: #fff; border: 1px solid #ccc; border-radius: 8px; font-size: 16px;">í™•ëŒ€+</button>
            <button class="ctrl-action-btn" data-action="flip" style="padding: 12px; background: #fff; border: 1px solid #ccc; border-radius: 8px; font-size: 16px;">â†” ì¢Œìš° ë°˜ì „</button>
            <button class="ctrl-action-btn" data-action="delete" style="padding: 12px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; font-size: 16px; color: #721c24;">ğŸ—‘ï¸ ì‚­ì œ</button>
        </div>
    </div>
    
    <!-- PC ë²„ì „ ë©”ì¸ UI -->
    <header class="app-header">
        <button id="open-controller-btn" class="controller-button">ğŸ“² ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ëŸ¬ ì—°ê²° (QR)</button>
        <button class="export-button">ì˜ìƒ ë§Œë“¤ê¸°</button>
    </header>
    
    <div class="app-main">
        <aside class="asset-panel">
            <div class="asset-container">
                <div id="decorations" class="asset-list">
                    <!-- ì•„ì´í…œ ê²½ë¡œ í™•ì¸! -->
                    <img src="img/ì‚¬ê°í˜•.png" class="asset-item" data-type="decoration" data-canvas-src="img/ì‚¬ê°í˜•.png" onerror="this.src='https://placehold.co/120x120/eee/ccc?text=ì‚¬ê°í˜•'">
                    <img src="img/ë‚˜ë¹„.png" class="asset-item" data-type="decoration" data-canvas-src="img/ë‚˜ë¹„.png" onerror="this.src='https://placehold.co/120x120/eee/ccc?text=ë‚˜ë¹„'">
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="canvas-wrapper">
                <div id="canvas">
                    <!-- ìŠ¤ëƒ… ê°€ì´ë“œ ë¼ì¸ -->
                    <div class="snap-guide vertical-guide"></div>
                    <div class="snap-guide horizontal-guide"></div>
                </div>
            </div>
            
            <div class="timeline">
                <div class="timeline-strip">
                    <div class="scene active" data-scene="1"></div><span class="arrow">â†’</span>
                    <div class="scene" data-scene="2"></div><span class="arrow">â†’</span>
                    <div class="scene" data-scene="3"></div><span class="arrow">â†’</span>
                    <div class="scene" data-scene="4"></div><span class="arrow">â†’</span>
                    <div class="scene" data-scene="5"></div><span class="arrow">â†’</span>
                    <div class="scene" data-scene="6"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- QR ì½”ë“œ ëª¨ë‹¬ -->
    <div id="qr-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; flex-direction: column;">
        <h2 style="color: white; margin-bottom: 20px;">ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”.</h2>
        <div id="qrcode-container" style="
            width: 256px; 
            height: 256px; 
            background: white; 
            padding: 15px; 
            border-radius: 5px;">
        </div>
        <button onclick="document.getElementById('qr-modal').style.display = 'none';" 
                style="margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer;">ë‹«ê¸°</button>
    </div>

    <!-- â­â­â­ ê²½ê³  ë©”ì‹œì§€ ë°” ì¶”ê°€ â­â­â­ -->
    <div id="limit-alert" class="alert-bar">
        í•œ í™”ë©´ì—ëŠ” ìµœëŒ€ 3ê°œì˜ ìºë¦­í„°ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ìºë¦­í„°ë¥¼ ì¶”ê°€í•˜ë ¤ë©´, í˜„ì¬ í™”ë©´ì— ìˆëŠ” ìºë¦­í„° ì¤‘ í•˜ë‚˜ë¥¼ ì‚­ì œí•´ì£¼ì„¸ìš”.
    </div>
    <!-- â­â­â­â­â­â­â­â­â­â­â­â­â­ -->

    <!-- ====================================================== -->
    <!-- â­ 1. Firebase SDK ì¶”ê°€ (í•„ìˆ˜) â­ -->
    <!-- v8 SDK (ê¸°ì¡´ ì½”ë“œì™€ í˜¸í™˜) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <!-- â­ 2. Firebase ì´ˆê¸°í™” (í•„ìˆ˜) â­ -->
    <script>
      // â—ï¸ controlling-82b19 í”„ë¡œì íŠ¸ ì„¤ì •ê°’ ì ìš©ë¨
      const firebaseConfig = {
        apiKey: "AIzaSyBkCdi2LZvWoGGnv3dT8Kq76TOz42L4GDw",
        authDomain: "controlling-82b19.firebaseapp.com",
        projectId: "controlling-82b19",
        storageBucket: "controlling-82b19.firebasestorage.app",
        messagingSenderId: "153225611363",
        appId: "1:153225611363:web:4a2669dedd056c27ce9056",
        measurementId: "G-QLXFYJGEHB"
      };
    
      // Firebase ì•± ì´ˆê¸°í™”
      if (!firebase.apps.length) {
         firebase.initializeApp(firebaseConfig);
      }
      
      // script3.jsì—ì„œ ì‚¬ìš©í•  'db' ê°ì²´ ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸
      const db = firebase.firestore();
    </script>
    <!-- ====================================================== -->

    <!-- 3. ê¸°íƒ€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ (ë°˜ë“œì‹œ Firebase ì´ˆê¸°í™” *ì´í›„*ì— ì™€ì•¼ í•¨) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="script3.js"></script>
    
</body>
</html>
